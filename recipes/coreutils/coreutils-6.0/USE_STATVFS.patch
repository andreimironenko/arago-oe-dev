From 5ce0b45a43fc2de8862a439b6e6281fdd55e27ed Mon Sep 17 00:00:00 2001
From: Paul Eggert <eggert@cs.ucla.edu>
Date: Tue, 15 Aug 2006 23:23:28 +0000
Subject: [PATCH] (USE_STATVFS): Define to 0 if f_type is needed, but
 statvfs.f_type not present.

---
 src/stat.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/stat.c b/src/stat.c
index 4c6047c..481096d 100644
--- a/src/stat.c
+++ b/src/stat.c
@@ -20,7 +20,8 @@
 #include <config.h>

 #if (STAT_STATVFS \
-     && (HAVE_STRUCT_STATVFS_F_BASETYPE || ! HAVE_STRUCT_STATFS_F_FSTYPENAME))
+     && (HAVE_STRUCT_STATVFS_F_BASETYPE \
+         || (! HAVE_STRUCT_STATFS_F_FSTYPENAME && HAVE_STRUCT_STATVFS_F_TYPE)))
 # define USE_STATVFS 1
 #else
 # define USE_STATVFS 0
--
1.7.2.3
